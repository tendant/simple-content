# ============================================
# AGUI CLI Environment Configuration
# ============================================
# Copy this file to .env and customize for your environment
# These environment variables are compatible with pkg/simplecontent/config

# ============================================
# Database Configuration
# ============================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# If empty or "memory", uses in-memory database
# DATABASE_URL=postgresql://user:password@localhost:5432/simplecontent
DATABASE_URL=memory

# PostgreSQL schema name (default: content)
# DB_SCHEMA=content

# ============================================
# Storage Backend Configuration
# ============================================

# Storage URL - Simple configuration (recommended)
# Options:
#   - "memory://" - In-memory storage (default)
#   - "file:///path/to/data" - Filesystem storage
#   - "s3://bucket-name" - S3 storage (requires AWS credentials)
STORAGE_URL=memory://

# Storage backend name (used internally, default: "default")
STORAGE_NAME=default

# --- Filesystem Storage (if STORAGE_TYPE=fs) ---
# Base directory for file storage
# FS_BASE_DIR=./data/storage

# URL prefix for generating download URLs
# FS_URL_PREFIX=

# Secret key for signing presigned URLs
# FS_SIGNATURE_SECRET_KEY=your-secret-key-here

# Presigned URL expiration in seconds (default: 3600 = 1 hour)
# FS_PRESIGN_EXPIRES_SECONDS=3600

# --- S3 Storage (if STORAGE_TYPE=s3) ---
# S3 bucket name (required for S3)
# AWS_S3_BUCKET=my-bucket-name

# AWS region (default: us-east-1)
# AWS_REGION=us-east-1

# AWS credentials
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# S3 endpoint (for MinIO or custom S3-compatible storage)
# Leave empty for AWS S3
# AWS_S3_ENDPOINT=http://localhost:9000

# Use SSL for S3 connections (default: true)
# AWS_S3_USE_SSL=true

# Use path-style URLs (required for MinIO, default: false)
# AWS_S3_USE_PATH_STYLE=false

# Presigned URL duration in seconds (default: 3600 = 1 hour)
# AWS_S3_PRESIGN_DURATION=3600

# Server-side encryption settings
# AWS_S3_ENABLE_SSE=false
# AWS_S3_SSE_ALGORITHM=AES256
# AWS_S3_SSE_KMS_KEY_ID=

# Auto-create bucket if it doesn't exist (default: false)
# AWS_S3_CREATE_BUCKET_IF_NOT_EXIST=false

# ============================================
# URL Strategy Configuration
# ============================================

# URL strategy: "content-based", "cdn", or "storage-delegated"
URL_STRATEGY=content-based

# API base URL (for content-based strategy)
API_BASE_URL=/api/v1

# --- CDN Strategy (if URL_STRATEGY=cdn) ---
# CDN base URL for downloads
# CDN_BASE_URL=https://cdn.example.com

# Upload base URL (optional, for separate upload endpoint)
# UPLOAD_BASE_URL=https://api.example.com

# ============================================
# Example Configurations
# ============================================

# --- Example 1: In-Memory (Default, for testing) ---
# DATABASE_TYPE=memory
# STORAGE_TYPE=memory
# URL_STRATEGY=content-based

# --- Example 2: PostgreSQL + Filesystem Storage ---
# DATABASE_TYPE=postgres
# DATABASE_URL=postgresql://user:password@localhost:5432/simplecontent
# DB_SCHEMA=content
# STORAGE_TYPE=fs
# FS_BASE_DIR=/var/lib/simplecontent/storage
# URL_STRATEGY=content-based

# --- Example 3: PostgreSQL + AWS S3 ---
# DATABASE_URL=postgresql://user:password@localhost:5432/simplecontent
# STORAGE_URL=s3://my-production-bucket
# AWS_REGION=us-west-2
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
# URL_STRATEGY=storage-delegated

# --- Example 4: PostgreSQL + MinIO (S3-compatible) ---
# DATABASE_URL=postgresql://user:password@localhost:5432/simplecontent
# STORAGE_URL=s3://my-minio-bucket
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=minioadmin
# AWS_SECRET_ACCESS_KEY=minioadmin
# AWS_S3_ENDPOINT=http://localhost:9000
# AWS_S3_USE_SSL=false
# AWS_S3_USE_PATH_STYLE=true
# AWS_S3_CREATE_BUCKET_IF_NOT_EXIST=true
# URL_STRATEGY=storage-delegated
