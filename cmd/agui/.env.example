# AG-UI Server Configuration
# Copy this file to .env and update with your values

# ============================================
# Server Configuration
# ============================================

# Port to run the server on (default: 8080)
PORT=8080

# ============================================
# Database Configuration
# ============================================

# Database connection URL
# Options:
#   - memory: In-memory database (default, for testing)
#   - postgresql://user:password@host:port/database: PostgreSQL
DATABASE_URL=postgresql://content:password@localhost:5432/powercard_db

# Database schema name (default: content)
DB_SCHEMA=content

# ============================================
# Storage Backend Configuration
# ============================================

# Storage URL
# Options:
#   - memory://: In-memory storage (default, for testing)
#   - file:///path/to/storage: Local filesystem storage
#   - s3://bucket-name: Amazon S3 or S3-compatible storage
STORAGE_URL=s3://mymusic

# Storage backend name (default: default)
STORAGE_BACKEND_NAME=s3-default

# ============================================
# S3 Configuration (if using S3 storage)
# ============================================

# S3 Region
AWS_REGION=us-east-1

# S3 Endpoint (for S3-compatible services like MinIO)
# Leave empty for AWS S3
S3_ENDPOINT=http://localhost:9000

# S3 External Endpoint (for generating presigned URLs)
# Used when clients need to access files through a different URL (e.g., CDN)
# Leave empty to use S3_ENDPOINT
S3_EXTERNAL_ENDPOINT=

# S3 Access Credentials
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin

# Force path style (required for MinIO and some S3-compatible services)
S3_FORCE_PATH_STYLE=true

# ============================================
# URL Strategy Configuration
# ============================================

# URL generation strategy
# Options:
#   - content-based: Generate URLs based on content ID (default)
#   - storage-delegated: Delegate URL generation to storage backend (presigned URLs)
URL_STRATEGY=storage-delegated

# API base URL (default: /api/v1)
API_BASE_URL=/api/v1

# ============================================
# Analysis Configuration (Optional)
# ============================================

# Analysis worker pool size (default: 4)
ANALYSIS_WORKERS=4

# Analysis timeout in seconds (default: 300)
ANALYSIS_TIMEOUT=300

# ============================================
# Logging Configuration
# ============================================

# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=info

# ============================================
# CORS Configuration (Optional)
# ============================================

# Allowed origins for CORS (comma-separated)
# CORS_ALLOWED_ORIGINS=http://localhost:3000,https://app.example.com

# ============================================
# Authentication Configuration (Optional)
# ============================================

# JWT Secret for token validation
# JWT_SECRET=your-secret-key-here

# JWT Issuer
# JWT_ISSUER=https://auth.example.com

# ============================================
# Example Configurations
# ============================================

# Development (In-Memory)
# DATABASE_URL=memory
# STORAGE_URL=memory://
# URL_STRATEGY=content-based

# Development (Local Files)
# DATABASE_URL=memory
# STORAGE_URL=file:///tmp/agui-storage
# URL_STRATEGY=content-based

# Development (PostgreSQL + Local Files)
# DATABASE_URL=postgresql://user:pass@localhost:5432/agui
# STORAGE_URL=file:///var/lib/agui/storage
# URL_STRATEGY=content-based

# Production (PostgreSQL + S3)
# DATABASE_URL=postgresql://user:pass@db.example.com:5432/agui
# STORAGE_URL=s3://my-production-bucket
# AWS_REGION=us-west-2
# URL_STRATEGY=storage-delegated

# Production (PostgreSQL + MinIO)
# DATABASE_URL=postgresql://user:pass@db.example.com:5432/agui
# STORAGE_URL=s3://my-bucket
# S3_ENDPOINT=https://minio.example.com
# S3_EXTERNAL_ENDPOINT=https://cdn.example.com
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# S3_FORCE_PATH_STYLE=true
# URL_STRATEGY=storage-delegated
